{% extends "/shared/_base.html" %}

{% block content %}
<style>
    /* Custom CSS for precise 90% viewport width and height */
    .custom-viewport-size {
      width: 90vw;
      height: 90vh;
    }
  </style>

  <section id="body" class="flex justify-center items-center h-screen">
      <div id="main" class="flex justify-center items-center w-full h-full relative">
          <div class="slideshow-container custom-viewport-size mx-auto relative">
              {% for image in images %}
              <div id="slides" class="slides fade hidden flex justify-center items-center w-full h-full">
                  <div class="numbertext">{{ loop.index }} / {{ images|length }}</div>
                  <img src="/tmp/{{ image }}" alt="Image {{ loop.index }}" class="max-w-full max-h-full object-contain">
                  <div class="text">{{ image }}</div>
              </div>
              {% endfor %}
  
              <!-- Next and previous buttons -->
              <a class="prev absolute top-1/2 -translate-y-1/2 left-0 cursor-pointer" onclick="changeSlide(-1); stopAutoSlide();">&#10094;</a>
              <a class="next absolute top-1/2 -translate-y-1/2 right-0 cursor-pointer" onclick="changeSlide(1); stopAutoSlide();">&#10095;</a>
          </div>
      </div>

    <script>

        let slideIndex = 0; // Start with the first slide
        let slides = document.getElementsByClassName("slides");
        let slideTimeout;

        function showSlide(n) {
            // Hide all slides
            for (let i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            // Show the specified slide
            slides[n].style.display = "block";
        }

        function showNextSlide() {
            slideIndex++;
            if (slideIndex >= slides.length) { slideIndex = 0; } // Loop back to the first slide
            showSlide(slideIndex);
            // Reset the timer
            clearTimeout(slideTimeout);
            slideTimeout = setTimeout(showNextSlide, 5000); // Change slide every 5 seconds
        }

        // When prev/next buttons are clicked
        function changeSlide(n) {
            slideIndex += n;
            if (slideIndex >= slides.length) { slideIndex = 0; }
            if (slideIndex < 0) { slideIndex = slides.length - 1; }
            showSlide(slideIndex);
            // Reset the timer
            clearTimeout(slideTimeout);
            slideTimeout = setTimeout(showNextSlide, 5000);
        }

        function stopAutoSlide() {
            clearTimeout(slideTimeout);
        }

        // Initialize the slideshow
        document.addEventListener("DOMContentLoaded", function () {
            showNextSlide(); // Start the slideshow
        });

    </script>

</section>
{% endblock %}